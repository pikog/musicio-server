.musicIOApp
  position fixed
  top 0
  left 0
  width 100vw
  height 100vh

  .home, .hud, canvas
    position absolute
    top 0
    left 0
    width inherit
    height inherit

  canvas
    z-index 5

  .home
    z-index 10
    display flex
    align-items center
    justify-content center
    opacity 0
    transition opacity .5s ease

    &.active
      opacity 1

    &.hidden
      display none

    &:before
      content ""
      height 400px
      width 100vw
      position absolute
      top 50%
      left 50%
      transform translate(-50%, -50%) scale(1, 1) skewY(-25deg)
      z-index 15
      animation skewIn 1s ease both, breath 15s ease 1s alternate infinite
      will-change transform
      background linear-gradient(to right, color-purple, color-purple-light)

    &:after
      content ""
      height 100%
      width 100%
      position absolute
      top 0
      left 0
      z-index 10
      background color-white-lighter
      background url("../img/bg.png")
      background-size cover
      animation breath2 30s ease 1s alternate infinite
      will-change transform

    .container
      z-index 20
      width 720px
      padding 25px 25px 50px 25px
      background alpha(color-white, .1)
      border-radius 10px
      box-shadow 1px 1px 5px alpha(color-black, .5)
      animation fadeIn 1s ease both
      will-change transform, opacity

    h1
      animation shiftIn .5s ease .5s both
      will-change transform, opacity
      font-size font-giant
      font-weight 700
      margin-bottom 25px

    p, .joinForm
      will-change transform
      animation shiftIn .5s ease 1s both

    .joinForm
      margin-top 25px
      display flex
      flex-flow column nowrap
      justify-content center

      .placeholder:after
        content ""
        position absolute
        right 10px
        top 50%
        font-size font-small
        color alpha(color-purple, .5)
        transform translate(0, -50%)

      .placeholder.pseudo:after
        content "(pseudo)"

      .placeholder.room:after
        content "(room name)"

      input[type="text"], button
        width 100%

      button
        background alpha(color-purple, .5)
        transition background ease .3s
        position relative
        overflow hidden

      button:before
        content ""
        position absolute
        top 50%
        left 50%
        z-index -5
        width 100%
        height 100%
        border-radius 25px
        background color-white
        transform translate(-50%, -50%) scale(0, 0)
        transition transform .3s ease
        will-change transform

      button:hover
        background alpha(color-purple, .7)
        &:before
          transform translate(-50%, -50%) scale(.8, 1.5)
          transition transform .3s cubic-bezier(.25,.1,.5,1.5)

      button:active
        background alpha(color-purple, 1)
        &:before
          transform translate(-50%, -50%) scale(1, 1.5)

      span
        position relative

      button span:before
        content ""
        position absolute
        top 50%
        left -30px
        height 18px
        width 18px
        display block
        background url("../img/loader.svg")
        background-size contain
        opacity .7
        transform translate(0, -50%) rotateZ(0deg)
        animation rotate 2s linear infinite

    .about
      position fixed
      bottom 20px
      left 20px
      width 30px
      height 30px
      z-index 20
      opacity .7
      transform opacity .3s ease
      will-change opacity

      &:hover
        opacity 1

  .hud
    z-index 6
    display flex
    justify-content center
    align-items flex-end

    .energy
      width 160px
      height 160px
      position absolute
      left 50%
      bottom -70px
      transform translate(-50%, 0)

    .energyCap, .energyPoolState, .energyPool, .energyTxt
      width inherit
      height inherit
      border-radius 50%
      position absolute
      left 0
      top 0
      display flex
      justify-content center
      align-items center

    .energyCap
      background alpha(color-white, .5)

    .energyPoolState
      background alpha(color-purple, .5)
      transition transform .3s cubic-bezier(.25,.1,.5,1.5)
      transform scale(.5, .5)
      will-change transform

    .energyPool
      background none
      top -25px

    .energyTxt
      top -5px
      font-size font-smaller

    .instrument
      position absolute
      left 50%
      bottom 100px
      transform translate(-50%, 0)

  .help
    position absolute
    top 0
    left 0
    width 100%
    height 100%
    z-index 7
    display flex
    align-items center
    justify-content center

    aside
      position absolute
      bottom 20px
      left 20px
      font-size font-smaller
      transform scale(0, 0)
      transform-origin 0 100%
      transition transform .3s ease
      will-change transform

      &.active
        transform scale(1, 1)
        transition transform .3s cubic-bezier(.25,.1,.5,1.5)

    .helpContainer
      width 520px
      padding 25px 25px 50px 25px
      background color-purple
      background linear-gradient(to top right, color-purple, color-purple-light)
      border-radius 10px
      box-shadow 1px 1px 5px alpha(color-black, .5)
      transform scale(0, 0)
      transition transform .3s ease
      will-change transform

      &.active
        transform scale(1, 1)
        transition transform .3s cubic-bezier(.25,.1,.5,1.5)

      h2
        font-weight 700
        width 100%
        padding-bottom 20px

      .wrapper
        text-align center
        margin-top 20px

      .wrapper.inline
        display flex
        flex-flow row nowrap
        justify-content center
        align-items center
        width 100%
        margin 0

      svg
        max-height 40px
        max-width 30%
        margin 20px
        vertical-align middle

      .helpEnergy svg
        max-height 20px

      button
        position absolute
        padding 10px 20px
        bottom 10px
        left 50%
        margin 0 auto
        transform translateX(-50%)
        transition transform .3s ease
        animation wiggle .6s linear infinite
        will-change transform

        &:hover
          transform translateX(-50%) scale(1.2, 1.2)

@keyframes skewIn {
  0%  { transform: translate(-50%, -50%) scale(1, 0) skewY(0deg); }
  50% { transform: translate(-50%, -50%) scale(1, 1) skewY(0deg); }
}

@keyframes fadeIn {
  0%  { transform: scale(1, 0); opacity: 0; }
  50% { transform: scale(1, 1); opacity: 0; }
}

@keyframes shiftIn {
  0%  { transform: translateY(50%); opacity: 0; }
}

@keyframes breath {
  50% { transform: translate(-50%, -50%) scale(1.1, 1.1) skewY(-25deg); }
}

@keyframes breath2 {
  50% { transform: scale(1.1, 1.1); }
}

@keyframes rotate {
  100% { transform: translate(0, -50%) rotateZ(360deg); }
}

@keyframes wiggle {
  25% { transform: translateX(-50%) scale(1.05, 1.05) rotateZ(1deg); }
  75% { transform: translateX(-50%) scale(0.95, 0.95) rotateZ(-1deg); }
}
